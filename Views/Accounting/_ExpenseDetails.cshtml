@model List<CarrotSystem.Models.ViewModel.ExpenseDetailView>

@{
    Layout = null;
    double total = 0;
}

@if (Model.Count > 0)
{
    @foreach (var item in Model)
    {
        total = total + item.Price;

        <tr>
            <td>@item.PeriodId</td>
            <td>@item.ExpenseCode</td>
            <td>@item.ExpenseDesc</td>
            <td>
                @if(item.IsClosed)
                {
                    @String.Format("{0:#,0.00}", item.Price)
                }
                else
                {
                    @if(item.Price > 0)
                    {
                        <input type="text" class="form-control" value="@String.Format("{0:#,0.00}", item.Price)" OnChange="ChangeItem('Price', @item.ExpenseId, this.value);" onKeyup="this.value=this.value.replace(/[^0-9.]/g,'');"/>
                    }
                    else
                    {
                        <input type="text" class="form-control" value="" OnChange="ChangeItem('Price', @item.ExpenseId, this.value);" onKeyup="this.value=this.value.replace(/[^0-9.]/g,'');"/>
                    }

                }
            </td>
        </tr>
    }
    <tr>
        <td colspan="3" class="text-right">Total : </td>
        <td id="totalTd">
            @String.Format("{0:#,0.00}", total)
        </td>
    </tr>
}
else
{
    <div class="alert alert-warning">
        No records for the selected period.
    </div>
}


